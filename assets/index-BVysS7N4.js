const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NoteSequenceRenderer-3EzmE3yk.js","assets/audio-player-C8eAfouR.js","assets/vexflow-helper-BJ71SLUW.js","assets/NoteSequenceRenderer-DUmsE4Ww.css","assets/IntervalCalculator-CtS9Q-k5.js","assets/index-B5kmyHN1.js","assets/index-sDpErw38.js","assets/IntervalCalculator-B-rAmGKc.css","assets/ScaleExplorer-yJVs6tq5.js","assets/ScaleExplorer-Dm0ivcOk.css","assets/KeyRelationshipVisualizer-B65CQkbf.js","assets/KeyRelationshipVisualizer-B2DgYzhw.css","assets/FreeKontaktLibraries-Bbmiyfvl.js","assets/FreeKontaktLibraries-BAf9AyHK.css","assets/AccentRecognizer-BRw2WczL.js","assets/AccentRecognizer-ktLrbVF4.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const g=a=>typeof a=="string",V=()=>{let a,e;const t=new Promise((i,n)=>{a=i,e=n});return t.resolve=a,t.reject=e,t},oe=a=>a==null?"":""+a,Pe=(a,e,t)=>{a.forEach(i=>{e[i]&&(t[i]=e[i])})},Ee=/###/g,re=a=>a&&a.indexOf("###")>-1?a.replace(Ee,"."):a,ae=a=>!a||g(a),j=(a,e,t)=>{const i=g(e)?e.split("."):e;let n=0;for(;n<i.length-1;){if(ae(a))return{};const o=re(i[n]);!a[o]&&t&&(a[o]=new t),Object.prototype.hasOwnProperty.call(a,o)?a=a[o]:a={},++n}return ae(a)?{}:{obj:a,k:re(i[n])}},se=(a,e,t)=>{const{obj:i,k:n}=j(a,e,Object);if(i!==void 0||e.length===1){i[n]=t;return}let o=e[e.length-1],r=e.slice(0,e.length-1),s=j(a,r,Object);for(;s.obj===void 0&&r.length;)o=`${r[r.length-1]}.${o}`,r=r.slice(0,r.length-1),s=j(a,r,Object),s!=null&&s.obj&&typeof s.obj[`${s.k}.${o}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${o}`]=t},Re=(a,e,t,i)=>{const{obj:n,k:o}=j(a,e,Object);n[o]=n[o]||[],n[o].push(t)},G=(a,e)=>{const{obj:t,k:i}=j(a,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},De=(a,e,t)=>{const i=G(a,t);return i!==void 0?i:G(e,t)},xe=(a,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in a?g(a[i])||a[i]instanceof String||g(e[i])||e[i]instanceof String?t&&(a[i]=e[i]):xe(a[i],e[i],t):a[i]=e[i]);return a},M=a=>a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Te=a=>g(a)?a.replace(/[&<>"'\/]/g,e=>Ne[e]):a;class Fe{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const $e=[" ",",","?","!",";"],Me=new Fe(20),Ae=(a,e,t)=>{e=e||"",t=t||"";const i=$e.filter(r=>e.indexOf(r)<0&&t.indexOf(r)<0);if(i.length===0)return!0;const n=Me.getRegExp(`(${i.map(r=>r==="?"?"\\?":r).join("|")})`);let o=!n.test(a);if(!o){const r=a.indexOf(t);r>0&&!n.test(a.substring(0,r))&&(o=!0)}return o},X=(a,e,t=".")=>{if(!a)return;if(a[e])return Object.prototype.hasOwnProperty.call(a,e)?a[e]:void 0;const i=e.split(t);let n=a;for(let o=0;o<i.length;){if(!n||typeof n!="object")return;let r,s="";for(let l=o;l<i.length;++l)if(l!==o&&(s+=t),s+=i[l],r=n[s],r!==void 0){if(["string","number","boolean"].indexOf(typeof r)>-1&&l<i.length-1)continue;o+=l-o+1;break}n=r}return n},B=a=>a==null?void 0:a.replace("_","-"),Oe={type:"logger",log(a){this.output("log",a)},warn(a){this.output("warn",a)},error(a){this.output("error",a)},output(a,e){var t,i;(i=(t=console==null?void 0:console[a])==null?void 0:t.apply)==null||i.call(t,console,e)}};class _{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Oe,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,n){return n&&!this.debug?null:(g(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new _(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new _(this.logger,e)}}var E=new _;class J{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const n=this.observers[i].get(t)||0;this.observers[i].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([n,o])=>{for(let r=0;r<o;r++)n(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,o])=>{for(let r=0;r<o;r++)n.apply(n,[e,...t])})}}class le extends J{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,n={}){var c,u;const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,r=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,t],i&&(Array.isArray(i)?s.push(...i):g(i)&&o?s.push(...i.split(o)):s.push(i)));const l=G(this.data,s);return!l&&!t&&!i&&e.indexOf(".")>-1&&(e=s[0],t=s[1],i=s.slice(2).join(".")),l||!r||!g(i)?l:X((u=(c=this.data)==null?void 0:c[e])==null?void 0:u[t],i,o)}addResource(e,t,i,n,o={silent:!1}){const r=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let s=[e,t];i&&(s=s.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(s=e.split("."),n=t,t=s[1]),this.addNamespaces(t),se(this.data,s,n),o.silent||this.emit("added",e,t,i,n)}addResources(e,t,i,n={silent:!1}){for(const o in i)(g(i[o])||Array.isArray(i[o]))&&this.addResource(e,t,o,i[o],{silent:!0});n.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,n,o,r={silent:!1,skipCopy:!1}){let s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),n=i,i=t,t=s[1]),this.addNamespaces(t);let l=G(this.data,s)||{};r.skipCopy||(i=JSON.parse(JSON.stringify(i))),n?xe(l,i,o):l={...l,...i},se(this.data,s,l),r.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(n=>t[n]&&Object.keys(t[n]).length>0)}toJSON(){return this.data}}var Ie={processors:{},addPostProcessor(a){this.processors[a.name]=a},handle(a,e,t,i,n){return a.forEach(o=>{var r;e=((r=this.processors[o])==null?void 0:r.process(e,t,i,n))??e}),e}};const ce={},de=a=>!g(a)&&typeof a!="boolean"&&typeof a!="number";class W extends J{constructor(e,t={}){super(),Pe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=E.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const n=this.resolve(e,i);return(n==null?void 0:n.res)!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const r=i&&e.indexOf(i)>-1,s=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Ae(e,i,n);if(r&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:g(o)?[o]:o};const c=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(c[0])>-1)&&(o=c.shift()),e=c.join(n)}return{key:e,namespaces:g(o)?[o]:o}}translate(e,t,i){let n=typeof t=="object"?{...t}:t;if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:s,namespaces:l}=this.extractFromKey(e[e.length-1],n),c=l[l.length-1];let u=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const d=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode")return f?o?{res:`${c}${u}${s}`,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${u}${s}`:o?{res:s,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:s;const p=this.resolve(e,n);let h=p==null?void 0:p.res;const m=(p==null?void 0:p.usedKey)||s,v=(p==null?void 0:p.exactUsedKey)||s,L=["[object Number]","[object Function]","[object RegExp]"],C=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,S=n.count!==void 0&&!g(n.count),R=W.hasDefaultValue(n),U=S?this.pluralResolver.getSuffix(d,n.count,n):"",D=n.ordinal&&S?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",A=S&&!n.ordinal&&n.count===0,x=A&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${U}`]||n[`defaultValue${D}`]||n.defaultValue;let b=h;T&&!h&&R&&(b=x);const we=de(b),ke=Object.prototype.toString.apply(b);if(T&&b&&we&&L.indexOf(ke)<0&&!(g(C)&&Array.isArray(b))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,b,{...n,ns:l}):`key '${s} (${this.language})' returned an object instead of string.`;return o?(p.res=k,p.usedParams=this.getUsedParamsDetails(n),p):k}if(r){const k=Array.isArray(b),w=k?[]:{},ee=k?v:m;for(const P in b)if(Object.prototype.hasOwnProperty.call(b,P)){const N=`${ee}${r}${P}`;R&&!h?w[P]=this.translate(N,{...n,defaultValue:de(x)?x[P]:void 0,joinArrays:!1,ns:l}):w[P]=this.translate(N,{...n,joinArrays:!1,ns:l}),w[P]===N&&(w[P]=b[P])}h=w}}else if(T&&g(C)&&Array.isArray(h))h=h.join(C),h&&(h=this.extendTranslation(h,e,n,i));else{let k=!1,w=!1;!this.isValidLookup(h)&&R&&(k=!0,h=x),this.isValidLookup(h)||(w=!0,h=s);const P=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&w?void 0:h,N=R&&x!==h&&this.options.updateMissing;if(w||k||N){if(this.logger.log(N?"updateKey":"missingKey",d,c,s,N?x:h),r){const I=this.resolve(s,{...n,keySeparator:!1});I&&I.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let O=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let I=0;I<q.length;I++)O.push(q[I]);else this.options.saveMissingTo==="all"?O=this.languageUtils.toResolveHierarchy(n.lng||this.language):O.push(n.lng||this.language);const te=(I,F,z)=>{var ie;const ne=R&&z!==h?z:P;this.options.missingKeyHandler?this.options.missingKeyHandler(I,c,F,ne,N,n):(ie=this.backendConnector)!=null&&ie.saveMissing&&this.backendConnector.saveMissing(I,c,F,ne,N,n),this.emit("missingKey",I,c,F,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?O.forEach(I=>{const F=this.pluralResolver.getSuffixes(I,n);A&&n[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(z=>{te([I],s+z,n[`defaultValue${z}`]||x)})}):te(O,s,x))}h=this.extendTranslation(h,e,n,p,i),w&&h===s&&this.options.appendNamespaceToMissingKey&&(h=`${c}${u}${s}`),(w||k)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${u}${s}`:s,k?h:void 0,n))}return o?(p.res=h,p.usedParams=this.getUsedParamsDetails(n),p):h}extendTranslation(e,t,i,n,o){var l,c;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=g(e)&&(((c=i==null?void 0:i.interpolation)==null?void 0:c.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let f=i.replace&&!g(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,i.lng||this.language||n.usedLng,i),u){const p=e.match(this.interpolator.nestingRegexp),h=p&&p.length;d<h&&(i.nest=!1)}!i.lng&&n&&n.res&&(i.lng=this.language||n.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(o==null?void 0:o[0])===p[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${t[0]}`),null):this.translate(...p,t),i)),i.interpolation&&this.interpolator.reset()}const r=i.postProcess||this.options.postProcess,s=g(r)?[r]:r;return e!=null&&(s!=null&&s.length)&&i.applyPostProcessor!==!1&&(e=Ie.handle(s,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,n,o,r,s;return g(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(i))return;const c=this.extractFromKey(l,t),u=c.key;n=u;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const f=t.count!==void 0&&!g(t.count),p=f&&!t.ordinal&&t.count===0,h=t.context!==void 0&&(g(t.context)||typeof t.context=="number")&&t.context!=="",m=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);d.forEach(v=>{var L,C;this.isValidLookup(i)||(s=v,!ce[`${m[0]}-${v}`]&&((L=this.utils)!=null&&L.hasLoadedNamespace)&&!((C=this.utils)!=null&&C.hasLoadedNamespace(s))&&(ce[`${m[0]}-${v}`]=!0,this.logger.warn(`key "${n}" for languages "${m.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(T=>{var U;if(this.isValidLookup(i))return;r=T;const S=[u];if((U=this.i18nFormat)!=null&&U.addLookupKeys)this.i18nFormat.addLookupKeys(S,u,T,v,t);else{let D;f&&(D=this.pluralResolver.getSuffix(T,t.count,t));const A=`${this.options.pluralSeparator}zero`,x=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(S.push(u+D),t.ordinal&&D.indexOf(x)===0&&S.push(u+D.replace(x,this.options.pluralSeparator)),p&&S.push(u+A)),h){const b=`${u}${this.options.contextSeparator}${t.context}`;S.push(b),f&&(S.push(b+D),t.ordinal&&D.indexOf(x)===0&&S.push(b+D.replace(x,this.options.pluralSeparator)),p&&S.push(b+A))}}let R;for(;R=S.pop();)this.isValidLookup(i)||(o=R,i=this.getResource(T,v,R,t))}))})}),{res:i,usedKey:n,exactUsedKey:o,usedLng:r,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,n={}){var o;return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,t,i,n):this.resourceStore.getResource(e,t,i,n)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!g(e.replace);let n=i?e.replace:e;if(i&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!i){n={...n};for(const o of t)delete n[o]}return n}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class ue{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=E.create("languageUtils")}getScriptPartFromCode(e){if(e=B(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=B(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(g(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const n=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const n=this.getScriptPartFromCode(i);if(this.isSupportedCode(n))return t=n;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(r=>{if(r===o)return r;if(!(r.indexOf("-")<0&&o.indexOf("-")<0)&&(r.indexOf("-")>0&&o.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===o||r.indexOf(o)===0&&o.length>1))return r})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),g(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),n=[],o=r=>{r&&(this.isSupportedCode(r)?n.push(r):this.logger.warn(`rejecting language code not found in supportedLngs: ${r}`))};return g(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):g(e)&&o(this.formatLanguageCode(e)),i.forEach(r=>{n.indexOf(r)<0&&o(this.formatLanguageCode(r))}),n}}const he={zero:0,one:1,two:2,few:3,many:4,other:5},pe={select:a=>a===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ze{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=E.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=B(e==="dev"?"en":e),n=t.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:n});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let r;try{r=new Intl.PluralRules(i,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),pe;if(!e.match(/-|_/))return pe;const l=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(l,t)}return this.pluralRulesCache[o]=r,r}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),(i==null?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(n=>`${t}${n}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((n,o)=>he[n]-he[o]).map(n=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,t,i={}){const n=this.getRule(e,i);return n?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const fe=(a,e,t,i=".",n=!0)=>{let o=De(a,e,t);return!o&&n&&g(t)&&(o=X(a,t,i),o===void 0&&(o=X(e,t,i))),o},Q=a=>a.replace(/\$/g,"$$$$");class Ve{constructor(e={}){var t;this.logger=E.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(i=>i),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:n,prefix:o,prefixEscaped:r,suffix:s,suffixEscaped:l,formatSeparator:c,unescapeSuffix:u,unescapePrefix:d,nestingPrefix:f,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:m,nestingOptionsSeparator:v,maxReplaces:L,alwaysFormat:C}=e.interpolation;this.escape=t!==void 0?t:Te,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=o?M(o):r||"{{",this.suffix=s?M(s):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?M(f):p||M("$t("),this.nestingSuffix=h?M(h):m||M(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=L||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>(t==null?void 0:t.source)===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,i,n){var p;let o,r,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=h=>{if(h.indexOf(this.formatSeparator)<0){const C=fe(t,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,i,{...n,...t,interpolationkey:h}):C}const m=h.split(this.formatSeparator),v=m.shift().trim(),L=m.join(this.formatSeparator).trim();return this.format(fe(t,l,v,this.options.keySeparator,this.options.ignoreJSONStructure),L,i,{...n,...t,interpolationkey:v})};this.resetRegExp();const u=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=((p=n==null?void 0:n.interpolation)==null?void 0:p.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>Q(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?Q(this.escape(h)):Q(h)}].forEach(h=>{for(s=0;o=h.regex.exec(e);){const m=o[1].trim();if(r=c(m),r===void 0)if(typeof u=="function"){const L=u(e,o,n);r=g(L)?L:""}else if(n&&Object.prototype.hasOwnProperty.call(n,m))r="";else if(d){r=o[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),r="";else!g(r)&&!this.useRawValueToEscape&&(r=oe(r));const v=h.safeValue(r);if(e=e.replace(o[0],v),d?(h.regex.lastIndex+=r.length,h.regex.lastIndex-=o[0].length):h.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,t,i={}){let n,o,r;const s=(l,c)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const d=l.split(new RegExp(`${u}[ ]*{`));let f=`{${d[1]}`;l=d[0],f=this.interpolate(f,r);const p=f.match(/'/g),h=f.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!h||h.length%2!==0)&&(f=f.replace(/'/g,'"'));try{r=JSON.parse(f),c&&(r={...c,...r})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${u}${f}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,l};for(;n=this.nestingRegexp.exec(e);){let l=[];r={...i},r=r.replace&&!g(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let c=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const u=n[1].split(this.formatSeparator).map(d=>d.trim());n[1]=u.shift(),l=u,c=!0}if(o=t(s.call(this,n[1].trim(),r),r),o&&n[0]===e&&!g(o))return o;g(o)||(o=oe(o)),o||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),o=""),c&&(o=l.reduce((u,d)=>this.format(u,d,i.lng,{...i,interpolationkey:n[1].trim()}),o.trim())),e=e.replace(n[0],o),this.regexp.lastIndex=0}return e}}const je=a=>{let e=a.toLowerCase().trim();const t={};if(a.indexOf("(")>-1){const i=a.split("(");e=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);e==="currency"&&n.indexOf(":")<0?t.currency||(t.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?t.range||(t.range=n.trim()):n.split(";").forEach(r=>{if(r){const[s,...l]=r.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),u=s.trim();t[u]||(t[u]=c),c==="false"&&(t[u]=!1),c==="true"&&(t[u]=!0),isNaN(c)||(t[u]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},ge=a=>{const e={};return(t,i,n)=>{let o=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(o={...o,[n.interpolationkey]:void 0});const r=i+JSON.stringify(o);let s=e[r];return s||(s=a(B(i),n),e[r]=s),s(t)}},Be=a=>(e,t,i)=>a(B(t),i)(e);class Ke{constructor(e={}){this.logger=E.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?ge:Be;this.formats={number:i((n,o)=>{const r=new Intl.NumberFormat(n,{...o});return s=>r.format(s)}),currency:i((n,o)=>{const r=new Intl.NumberFormat(n,{...o,style:"currency"});return s=>r.format(s)}),datetime:i((n,o)=>{const r=new Intl.DateTimeFormat(n,{...o});return s=>r.format(s)}),relativetime:i((n,o)=>{const r=new Intl.RelativeTimeFormat(n,{...o});return s=>r.format(s,o.range||"day")}),list:i((n,o)=>{const r=new Intl.ListFormat(n,{...o});return s=>r.format(s)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ge(t)}format(e,t,i,n={}){const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(s=>s.indexOf(")")>-1)){const s=o.findIndex(l=>l.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,s)].join(this.formatSeparator)}return o.reduce((s,l)=>{var d;const{formatName:c,formatOptions:u}=je(l);if(this.formats[c]){let f=s;try{const p=((d=n==null?void 0:n.formatParams)==null?void 0:d[n.interpolationkey])||{},h=p.locale||p.lng||n.locale||n.lng||i;f=this.formats[c](s,h,{...u,...n,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${c}`);return s},e)}}const Ue=(a,e)=>{a.pending[e]!==void 0&&(delete a.pending[e],a.pendingCount--)};class qe extends J{constructor(e,t,i,n={}){var o,r;super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=n,this.logger=E.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(r=(o=this.backend)==null?void 0:o.init)==null||r.call(o,i,n.backend,n)}queueLoad(e,t,i,n){const o={},r={},s={},l={};return e.forEach(c=>{let u=!0;t.forEach(d=>{const f=`${c}|${d}`;!i.reload&&this.store.hasResourceBundle(c,d)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?r[f]===void 0&&(r[f]=!0):(this.state[f]=1,u=!1,r[f]===void 0&&(r[f]=!0),o[f]===void 0&&(o[f]=!0),l[d]===void 0&&(l[d]=!0)))}),u||(s[c]=!0)}),(Object.keys(o).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(o),pending:Object.keys(r),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,t,i){const n=e.split("|"),o=n[0],r=n[1];t&&this.emit("failedLoading",o,r,t),!t&&i&&this.store.addResourceBundle(o,r,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const s={};this.queue.forEach(l=>{Re(l.loaded,[o],r),Ue(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{s[c]||(s[c]={});const u=l.loaded[c];u.length&&u.forEach(d=>{s[c][d]===void 0&&(s[c][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,t,i,n=0,o=this.retryTimeout,r){if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:n,wait:o,callback:r});return}this.readingCalls++;const s=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&u&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,n+1,o*2,r)},o);return}r(c,u)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const c=l(e,t);c&&typeof c.then=="function"?c.then(u=>s(null,u)).catch(s):s(null,c)}catch(c){s(c)}return}return l(e,t,s)}prepareLoading(e,t,i={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();g(e)&&(e=this.languageUtils.toResolveHierarchy(e)),g(t)&&(t=[t]);const o=this.queueLoad(e,t,i,n);if(!o.toLoad.length)return o.pending.length||n(),null;o.toLoad.forEach(r=>{this.loadOne(r)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),n=i[0],o=i[1];this.read(n,o,"read",void 0,void 0,(r,s)=>{r&&this.logger.warn(`${t}loading namespace ${o} for language ${n} failed`,r),!r&&s&&this.logger.log(`${t}loaded namespace ${o} for language ${n}`,s),this.loaded(e,r,s)})}saveMissing(e,t,i,n,o,r={},s=()=>{}){var l,c,u,d,f;if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((d=(u=this.services)==null?void 0:u.utils)!=null&&d.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if((f=this.backend)!=null&&f.create){const p={...r,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let m;h.length===5?m=h(e,t,i,n,p):m=h(e,t,i,n),m&&typeof m.then=="function"?m.then(v=>s(null,v)).catch(s):s(null,m)}catch(m){s(m)}else h(e,t,i,n,s,p)}!e||!e[0]||this.store.addResource(e[0],t,i,n)}}}const me=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:a=>{let e={};if(typeof a[1]=="object"&&(e=a[1]),g(a[1])&&(e.defaultValue=a[1]),g(a[2])&&(e.tDescription=a[2]),typeof a[2]=="object"||typeof a[3]=="object"){const t=a[3]||a[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:a=>a,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ye=a=>{var e,t;return g(a.ns)&&(a.ns=[a.ns]),g(a.fallbackLng)&&(a.fallbackLng=[a.fallbackLng]),g(a.fallbackNS)&&(a.fallbackNS=[a.fallbackNS]),((t=(e=a.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),typeof a.initImmediate=="boolean"&&(a.initAsync=a.initImmediate),a},H=()=>{},He=a=>{Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(t=>{typeof a[t]=="function"&&(a[t]=a[t].bind(a))})};class K extends J{constructor(e={},t){if(super(),this.options=ye(e),this.services={},this.logger=E,this.modules={external:[]},He(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(g(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=me();this.options={...i,...this.options,...ye(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const n=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?E.init(n(this.modules.logger),this.options):E.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=Ke;const u=new ue(this.options);this.store=new le(this.options.resources,this.options);const d=this.services;d.logger=E,d.resourceStore=this.store,d.languageUtils=u,d.pluralResolver=new ze(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=n(c),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new Ve(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new qe(n(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(f,...p)=>{this.emit(f,...p)}),this.modules.languageDetector&&(d.languageDetector=n(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=n(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new W(this.services,this.options),this.translator.on("*",(f,...p)=>{this.emit(f,...p)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,t||(t=H),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...u)=>this.store[c](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...u)=>(this.store[c](...u),this)});const s=V(),l=()=>{const c=(u,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(d),t(u,d)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),s}loadResources(e,t=H){var o,r;let i=t;const n=g(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const s=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(d=>{d!=="cimode"&&s.indexOf(d)<0&&s.push(d)})};n?l(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>l(u)),(r=(o=this.options.preload)==null?void 0:o.forEach)==null||r.call(o,c=>l(c)),this.services.backendConnector.load(s,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(c)})}else i(null)}reloadResources(e,t,i){const n=V();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=H),this.services.backendConnector.reload(e,t,o=>{n.resolve(),i(o)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Ie.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=V();this.emit("languageChanging",e);const n=s=>{this.language=s,this.languages=this.services.languageUtils.toResolveHierarchy(s),this.resolvedLanguage=void 0,this.setResolvedLanguage(s)},o=(s,l)=>{l?this.isLanguageChangingTo===e&&(n(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,i.resolve((...c)=>this.t(...c)),t&&t(s,(...c)=>this.t(...c))},r=s=>{var u,d;!e&&!s&&this.services.languageDetector&&(s=[]);const l=g(s)?s:s&&s[0],c=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(g(s)?[s]:s);c&&(this.language||n(c),this.translator.language||this.translator.changeLanguage(c),(d=(u=this.services.languageDetector)==null?void 0:u.cacheUserLanguage)==null||d.call(u,c)),this.loadResources(c,f=>{o(f,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?r(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(r):this.services.languageDetector.detect(r):r(e),i}getFixedT(e,t,i){const n=(o,r,...s)=>{let l;typeof r!="object"?l=this.options.overloadTranslationOptionHandler([o,r].concat(s)):l={...r},l.lng=l.lng||n.lng,l.lngs=l.lngs||n.lngs,l.ns=l.ns||n.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||n.keyPrefix);const c=this.options.keySeparator||".";let u;return l.keyPrefix&&Array.isArray(o)?u=o.map(d=>`${l.keyPrefix}${c}${d}`):u=l.keyPrefix?`${l.keyPrefix}${c}${o}`:o,this.t(u,l)};return g(e)?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=i,n}t(...e){var t;return(t=this.translator)==null?void 0:t.translate(...e)}exists(...e){var t;return(t=this.translator)==null?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const r=(s,l)=>{const c=this.services.backendConnector.state[`${s}|${l}`];return c===-1||c===0||c===2};if(t.precheck){const s=t.precheck(this,r);if(s!==void 0)return s}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||r(i,e)&&(!n||r(o,e)))}loadNamespaces(e,t){const i=V();return this.options.ns?(g(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{i.resolve(),t&&t(n)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=V();g(e)&&(e=[e]);const n=this.options.preload||[],o=e.filter(r=>n.indexOf(r)<0&&this.services.languageUtils.isSupportedCode(r));return o.length?(this.options.preload=n.concat(o),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}dir(e){var n,o;if(e||(e=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=((o=this.services)==null?void 0:o.languageUtils)||new ue(me());return t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new K(e,t)}cloneInstance(e={},t=H){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},o=new K(n);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(s=>{o[s]=this[s]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i){const s=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},l[c]=Object.keys(l[c]).reduce((u,d)=>(u[d]={...l[c][d]},u),l[c]),l),{});o.store=new le(s,n),o.services.resourceStore=o.store}return o.translator=new W(o.services,n),o.translator.on("*",(s,...l)=>{o.emit(s,...l)}),o.init(n,t),o.translator.options=n,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const y=K.createInstance();y.createInstance=K.createInstance;y.createInstance;y.dir;y.init;y.loadResources;y.reloadResources;y.use;y.changeLanguage;y.getFixedT;y.t;y.exists;y.setDefaultNamespace;y.hasLoadedNamespace;y.loadNamespaces;y.loadLanguages;const Ge="Music Theory Toolkit",_e="Toolbox🏠",We="Welcome to the Music Theory Learning Toolkit",Je="An interactive platform to make music theory learning more intuitive and efficient.",Ye="This toolkit aims to replace tedious manual table lookups and calculations in the learning process through programmatic computation and visualization. We use <strong>Tonal.js</strong> for precise music theory calculations and render the results into clear sheet music with <strong>VexFlow</strong>, helping you deepen your understanding and improve learning efficiency.",Qe="Explore Our Tools",Ze="Note Sequence Renderer",Xe="Render note sequences into playable and exportable sheet music with custom settings.",et="Interval Analyzer",tt="Calculate the interval between any two notes, supporting voice building and chord recognition.",nt="Scale Explorer",it="Generate and display various scales, providing usage suggestions and highlighting their characteristic notes.",ot="Key Relationship Visualizer",rt="Visually demonstrate the relationships between keys using the circle of fifths and other graphics.",at="Accent Recognizer",st="Analyze the beat, duration, and pitch contour of polyphonic music and visualize accents.",lt="Free Music Production Resources",ct="A curated list of free sound library resources to help you create.",dt="Ready to start? Select a tool from the sidebar to begin your exploration!",ut="Interval Analyzer",ht="Input formats:<br>1. Two notes: <code>C4 G4</code> (calculates interval)<br>2. Base note + intervals: <code>C4 M3 P5</code> (builds voicing)<br>3. Multiple notes: <code>C4 E4 G4 B4</code> (identifies chord)<br>(All notes must include octave)",pt="Input:",ft="e.g., C4 G4 or C4 M3 P5 or C4 E4 G4",gt="Analyze",mt="Clear",yt="Results:",vt="Show Inversion",bt="Show Simplification",St="Input cannot be empty.",xt="Input requires at least two parts.",It='The first part "{{note}}" must be a valid note with an octave.',Ct="The following parts are not valid intervals: {{intervals}}",Lt='Input contains an invalid note or a note missing an octave: "{{note}}"。',wt='Cannot recognize the second part "{{part}}", it is neither a valid interval nor a valid note (or is missing an octave).',kt="Unrecognized input format. Please check that all notes have octaves.",Pt="Cannot get MIDI value for a note, please check the input.",Et="Cannot calculate the interval, please check the input.",Rt='Cannot parse the calculated interval "{{interval}}".',Dt="An error occurred during calculation.",Nt='Error applying interval "{{intervalName}}" from base note "{{baseNote}}".',Tt="Error building voicing: {{message}}",Ft="Chord detection requires at least two notes.",$t="Internal error: Cannot access chord detection functionality.",Mt="An error occurred during chord detection: {{message}}",At='Error applying interval "{{intervalName}}" to "{{baseNote}}", result is invalid.',Ot="An error occurred during transposition: {{message}}",zt="An internal error occurred while rendering the score.",Vt="Cannot render: invalid note format",jt="Render error: container is missing an ID.",Bt="Render error: {{message}}",Kt="Cannot render score: no valid notes.",Ut="Error rendering score: some notes have an invalid format.",qt="Error rendering VexFlow score: {{message}}",Ht="Error: {{message}}",Gt="Cannot get valid interval properties.",_t="Failed to generate voicing notes.",Wt="No valid input notes.",Jt="Failed to calculate a valid original interval.",Yt="Cannot calculate the inversion for this interval (empty result).",Qt="Cannot get properties for the inverted interval.",Zt="Error calculating inversion: {{message}}",Xt="Cannot get valid interval properties (final check).",en="Failed to generate a valid list of notes.",tn="Unrecognized processing mode.",nn="Perfect Consonance",on="Imperfect Consonance",rn="Dissonance",an="Unknown",sn="Harmonic Interval",ln="Melodic Interval",cn="Harmonic Voicing",dn="Melodic Sequence",un="Interval: {{name}}",hn=" (inverted)",pn=" [simplified: {{name}}]",fn=" [cannot simplify]",gn="Semitones: {{count}}",mn="Consonance: {{type}}",yn="Voicing Notes: {{notes}}",vn="Detected Chords: {{chords}}",bn="No specific chord detected.",Sn="Related Notes: {{notes}}",xn={title:"Accent Recognizer",desc:"Enter note sequences line by line for each voice (pitch/duration, e.g., C4/q D5/8 E5/8). The tool will analyze accents in each voice and the overall harmonic progression.",configLabel:"Configuration",timeSigLabel:"Time Sig:",keyLabel:"Key:",accentDisplayLabel:"Voice Accent Display:",metricalAccentLabel:"Metrical",durationalAccentLabel:"Durational",registralAccentLabel:"Registral",contourAccentLabel:"Contour",articulationAccentLabel:"Art./Dyn. - Placeholder",textureAccentLabel:"Texture - Placeholder",patternAccentLabel:"Pattern - Placeholder",inputSectionLabel:"Input (Line by Line for Each Voice)",noteSequenceLabel:"Note Sequence:",inputPlaceholder:`Each line represents a voice, notes separated by spaces, e.g.:
C4/q E4/q G4/h
G3/w
R/q C3/q R/h`,inputHint:"Use standard pitch notation (C4, Db5) and duration abbreviations (w, h, q, 8, 16...). Use R or Z for rests.",analyzeButton:"Analyze Accents",analysisResultsLabel:"Analysis Results (Table View)",legendPlaceholder:"Color legend will be displayed here.",analysisPlaceholder:'After clicking the "Analyze Accents" button, the results table will be displayed here.',playbackControlsLabel:"Playback Controls",playButton:"Play",stopButton:"Stop",bpmLabel:"BPM:",accentDisplay:{metrical:"Metrical",durational:"Durational",registral:"Registral",contour:"Contour",articulation:"Articulation/Dynamics",texture:"Texture",pattern:"Pattern Disruption"},status:{initial:'Please enter a note sequence, configure parameters, and then click "Analyze Accents".',parsing:"Parsing input...",calculating:"Calculating accent scores (including harmonic analysis)...",generatingTable:"Generating table..."},analysis:{messageComplete:"Accent analysis complete (harmony row separated).",details:"Harmonic analysis is preliminary. Some accent types are placeholders."},table:{noData:"No analysis data available to generate a table.",noVoiceOrHarmony:"No voices or harmonic events found.",headerElement:"Element",headerHarmony:"Harmony",headerVoice:"Voice {{voiceId}}",headerTotalAccent:"Total Accent",restSymbol:"(R)"},legend:{initial:"The color legend will be displayed after analysis.",notAvailable:"Could not generate legend.",title:"Voice Accent Type Base Colors (Check to overlay):",footer:"The harmony row shows chord symbols and their accent strength; the total accent row's color is based on the combined strength of all events (including harmony) at that time point."},tooltip:{time:"Time: {{time}}",harmony:" | Harmony: {{symbol}} (Str: {{strength}}, Type: {{type}})",continuing:" | Continuing: {{symbol}}",noteStart:"Start: {{time}} | Evt {{eventId}}: {{pitch}} ({{duration}} beats)",rawAccents:" | Raw Accents: {{accents}}",restStart:"Rest Start: {{time}} | Evt {{eventId}} ({{duration}} beats)",continuingNote:"Continuing: Evt {{eventId}} ({{pitch}})",continuingRest:"Continuing Rest: Evt {{eventId}}",totalStrength:"Time: {{time}} | Total Strength (incl. harmony): {{strength}}"},alert:{parseErrors:`Errors occurred while parsing input (see console for details). Invalid items were skipped.

{{errors}}`},error:{uiMissing:"Error loading tool: UI elements missing.",invalidTimeSignature:"Invalid time signature: {{timeSignature}}",invalidDurationSymbol:'Voice {{voiceId}}, Element {{elementIndex}}: Invalid duration symbol "{{durationSymbol}}". Skipping.',invalidPitch:'Voice {{voiceId}}, Element {{elementIndex}}: Invalid pitch "{{pitch}}". Skipping.',parseReturnedNull:"Parsing returned null.",analysisFailed:"An error occurred during analysis: {{message}}"}},In={title:"Key Relationship Visualizer",description:"Display major and minor key relationships. Click nodes to highlight, use the legend on the right to filter relationships, and switch layouts.",loadingGraph:"Loading relationship graph...",legendTitle:"Relationship Legend (Click to toggle display)",loadingLegend:"Loading legend...",layoutParallel:"Parallel Key Priority",layoutRelative:"Relative Key Priority",invalidKey:"Invalid Key",keyLabelMajor:"{{tonic}} Major",keyLabelMinor:"{{tonic}} Minor",legend:{relative:"Relative",parallel:"Parallel",domSubdom:"Dominant/Subdominant",secondary:"Secondary Dominants",neapolitan:"Neapolitan (bII)",mixture:"Chromatic/Mixture"},error:{invalidKeyInfo:"Could not get valid key info for {{tonic}} {{type}}.",invalidContainerSize:"Invalid container dimensions for layout calculation.",cytoscapeContainerNotFound:"Cytoscape container not found!",cytoscapeInitializationFailed:"Error initializing Cytoscape:",graphLoadingFailed:"Error loading graph: {{message}}. Check console.",noContainerProvided:"KeyRelationshipVisualizer initialization failed: No container element provided.",uiElementsMissing:"Could not find essential UI elements (main container, legend, graph, or layout buttons). Check HTML template.",uiElementsMissingShort:"Error: UI layout elements missing.",legendPopulationFailed:"Error populating legend:",legendLoadingFailed:"Failed to load legend.",graphDataGenerationFailedShort:"Could not generate graph data.",graphDataGenerationFailed:"Error during graph data generation or initialization:",graphInitializationFailed:"Failed to initialize graph: {{message}}"},warning:{layoutPositions:"Layout Positions Warning: Expected 24, Got Parallel: {{parallel}}, Relative: {{relative}}"},log:{graphGenerated:"Generated {{nodes}} nodes and {{edges}} edges with two layout options.",cytoscapeInitialized:"Cytoscape graph initialized with preset layout.",toolInitialized:"Key Relationship Visualizer tool initialized with layout switching."}},Cn={notAvailable:"N/A",none:"None"},Ln={title:Ge,toolbox:_e,welcomeTitle:We,tagline:Je,introText:Ye,exploreTools:Qe,noteSequenceRenderer:Ze,noteSequenceRendererDesc:Xe,intervalCalculator:et,intervalCalculatorDesc:tt,scaleExplorer:nt,scaleExplorerDesc:it,keyRelationships:ot,keyRelationshipsDesc:rt,accentRecognizer:at,accentRecognizerDesc:st,freeKontaktLibs:lt,freeKontaktLibsDesc:ct,"free-kontakt-libraries":{title:"Free Music Production Resources",disclaimerStrong:"Disclaimer:",disclaimerText:"This page compiles publicly available links to free music production software (DAW), sound libraries, and effects, aiming to help musicians find them easily. All product copyrights belong to their original developers/companies. Please visit the official links, read carefully, and comply with each product's End User License Agreement (EULA). This site has no official partnership with the listed companies; the list is for reference only.",freeDaws:"Free Digital Audio Workstations (DAWs)",cakewalkDescription:"(Powerful free Windows DAW)",sonarDescription:"(Free Tier)",foundationBundles:"Foundation & Bundles",kompleteStartDescription:"(Includes Kontakt Player, Reaktor Player, and numerous sound sources/effects)",kontaktPlayerDescription:"(Standalone Player)",majorSoundVendors:"Free Selections from Major Sound Vendors",arturia:"Arturia",analogLabDescription:"(Many classic synth presets)",ikMultimedia:"IK Multimedia",syntronik2Description:"(Free version of classic synth collection)",spitfireAudio:"Spitfire Audio",labsDescription:"(Constantly updated, large collection of free, high-quality, creative sound sources)",bbcSoDescription:"(Entry-level full orchestral sound source)",otherKontaktLibraries:"Other Free Kontakt Player Libraries",audioImperia:"Audio Imperia",emergenceAudio:"Emergence Audio",emergenceAudioDescription:"(Check page for free content)",fractureSounds:"Fracture Sounds",aprilFoolsLibrary:"(April Fools Library)",heavyocity:"Heavyocity",impactSoundworks:"Impact Soundworks",pianoDescription:"(Piano)",shredderDescription:"(Possibly older, check availability)",nativeInstruments:"Native Instruments",projectSam:"ProjectSAM",soniccouture:"Soniccouture",sonixinema:"Sonixinema",scorehubDescription:"(May contain free downloads within the platform)",sonokinetic:"Sonokinetic",tuttiDescription:"(Aleatoric Orchestral Phrases)",empDescription:"(Rhodes Piano - check if still free)",vivaceDescription:"(Orchestral Tutti Samples)",carouselDescription:"(Fairground Organ)",sonuscore:"Sonuscore",cinematicTextures:"Cinematic Textures",soundiron:"Soundiron",foodPercussion:"(Food Percussion)",strezovSampling:"Strezov Sampling",tempestAudio:"Tempest Audio",waveletAudio:"Wavelet Audio",pulseBoxDescription:"(May require registration)",initializationError:"FreeKontaktLibraries initialization failed: container element not provided.",initializationSuccess:"Free Kontakt Libraries resource page initialized."},"scale-Explorer":{section1Title:"Scale Generation & Explorer",section1Description:'Select a tonic and scale type, or click "Randomize" to explore various scales.',tonicLabel:"Tonic:",tonicPlaceholder:"e.g., C4, Ab, F#",scaleTypeLabel:"Scale Type:",loadingOption:"-- Loading --",clefLabel:"Clef:",trebleClef:"Treble",bassClef:"Bass",altoClef:"Alto",tenorClef:"Tenor",generateScaleButton:"Generate Scale",randomizeScaleButton:"Randomize",scaleNotesTitle:"Scale Notes (Characteristic notes in bold):",selectParamsPrompt:"Select parameters and click Generate.",scaleUsageTitle:"Modal Characteristics & Suggestions:",noUsageSuggestion:"-",noUsageSuggestionAvailable:"No usage suggestion information available for this mode.",scoreRenderTitle:"Sheet Music Render:",scoreDisplayPrompt:"Sheet music will be displayed here.",section2Title:"Scale Detection",section2Description:'Enter a set of notes (separated by spaces, e.g., "C4 D# F A"), and the system will attempt to identify possible scales containing these notes.',inputNotesLabel:"Enter Notes:",inputNotesPlaceholder:"e.g., G3 Bb3 C#4 F4",detectScaleButton:"Detect Scale",detectionResultPrompt:"Detection results will be displayed here.",usage:{major:"The basic major scale, bright, cheerful, and stable. Widely used in various music.",lydian:"Brighter and more dreamy than the major scale, with a characteristic #4 (augmented fourth). Often used in film scores, jazz (especially over Maj7#11 chords).",mixolydian:"Has a dominant feel due to the minor seventh (b7). Common in blues, rock, funk, and country music, often used over dominant seventh chords.",minor:"Natural minor scale, a melancholic and sad tone.",dorian:"Slightly brighter than the natural minor (due to the major sixth (6)), with a jazz, folk, or slight blues feel. Often used over IIm7 chords in jazz ii-V-I progressions.",phrygian:"Very dark, with a Spanish/Flamenco/Middle Eastern flavor, characterized by the minor second (b2). Also common in metal music.",locrian:"The most unstable and dissonant mode, containing a diminished fifth (b5). Rarely used as a central mode, often for passing or special effects.",harmonicMinor:"Has a distinct Middle Eastern or classical color due to its augmented second (between bVI and VII) and leading tone (major seventh (7)). Often used for dominant chords in minor keys (V7).",melodicMinor:"Ascending, it's brighter than natural minor (major sixth (6), major seventh (7)); descending, it usually reverts to natural minor. Its ascending form (jazz minor) is commonly used in jazz.",majorPentatonic:"Very pleasant, open, often used in folk, country, and Asian music. The absence of semitones makes it sound harmonious.",minorPentatonic:"The foundation of blues and rock music, with a raw, powerful sound. Lacks the second and sixth degrees.",blues:"Adds a diminished fifth (b5, 'blue note') to the minor pentatonic scale, sometimes also includes a major third, very characteristic, core of blues music.",lydianDominant:"The #4 version of Mixolydian, having both dominant function (b7) and Lydian's brightness (#4). Often used for altered dominant chords (Sub V7) or Tritone Substitution in jazz.",phrygianDominant:"The fifth mode of harmonic minor, with a strong Spanish/Middle Eastern/Jewish musical flavor (b2, M3, b7)."},error:{uiElementsNotFound:"ScaleExplorer Error: Could not find the following UI elements: {{elements}}",vexflowTargetCreation:"Could not create VexFlow render target.",missingTonicOrScaleType:"Please enter a tonic and select a scale type.",cannotGetScale:'Could not get scale "{{fullScaleName}}". ',invalidScaleType:'Invalid scale type: "{{scaleType}}"',unrecognizedTonic:'Unrecognized tonic: "{{tonic}}".',checkInput:"Please check the input.",vexflowConversion:"Successfully obtained scale notes, but encountered an error converting to VexFlow format.",noRenderableNotes:"Scale contains no renderable notes.",generateRequestError:"An error occurred while processing the scale generation request:",generatingScale:"Error generating scale: {{message}}",cannotRandomize:"Cannot randomize: Scale names not available.",noValidNotesProvided:"No valid notes provided for detection.",noValidPitchClasses:"No valid pitch classes found in input.",noMatchingScalesFound:"For notes [{{notes}}], no matching known scales were found, even when trying each note as a tonic.",detectRequestError:"An error occurred while processing the scale detection request:",detectingScale:"Error detecting scale: {{message}}",collapsibleStructure:"Collapsible structure error for header:",initializationFailed:"ScaleExplorer initialization failed: container element not provided."},warning:{noteParseFailed:"Could not parse note: {{noteName}}, skipping.",transposeError:"Error transposing tonic {{tonic}} by interval {{interval}}:",invalidNotesIgnored:"Warning: The following inputs could not be recognized as valid notes and were ignored: {{notes}}",processingScaleError:'Error processing scale "{{fullName}}", categorized as "other". Error: {{error}}',noCollapsibleHeaders:"No collapsible headers found to bind events to."},log:{scaleSelectPopulated:"Scale select populated with {{count}} scales.",defaultOctaveUsed:"Tonic octave not provided, defaulting to octave 4 for rendering.",scaleRenderedSuccessfully:'Scale "{{fullScaleName}}" rendered successfully (incl. enhancements).',scaleDetectionCompleted:"Scale detection for notes [{{notes}}] completed (checked {{tonicsCount}} potential tonics). Found: {{priorityCount}} priority, {{otherCount}} other scales.",toolInitialized:"Scale Explorer tool initialized (with collapsible sections)."},alert:{scaleListNotLoaded:"Scale list not yet loaded, cannot randomize."},detecting:"Detecting...",inputNotesForDetection:"Please enter at least one note for detection.",invalidInputNotes:"Invalid input, please separate notes with spaces.",inputNotes:"Please enter notes.",possibleScalesFound:"Attempting to identify possible scales containing notes [{{notes}}] by trying each input note [{{tonics}}] as a tonic:",commonModesScales:"Common Modes/Scales",noMatchInCommonList:"No matches found in common list.",otherMatchingScales:"Other Matching Scales",noMoreMatchesInOtherScales:"No more matches found in other scales.",noteAboutList:"Note: This list includes all known scales that contain the input notes, not necessarily an exact match."},callToAction:dt,"tool-selector":{"note-sequence-renderer":"Note Sequence Renderer","interval-calculator":"Interval Analyzer","scale-explorer":"Scale Explorer","key-relationships":"Key Relationship Visualizer","accent-recognizer":"Accent Recognizer","free-kontakt-libs":"Free Music Production Resources"},intervalAnalyzerTitle:ut,intervalAnalyzerDesc:ht,inputLabel:pt,inputPlaceholder:ft,analyzeButton:gt,clearButton:mt,resultsLabel:yt,showInversionLabel:vt,showSimplificationLabel:bt,errorInputEmpty:St,errorNeedTwoParts:xt,errorInvalidBaseNote:It,errorInvalidIntervals:Ct,errorInvalidNoteInInput:Lt,errorUnrecognizedSecondPart:wt,errorUnrecognizedFormat:kt,errorMidiValue:Pt,errorCannotCalculateInterval:Et,errorCannotParseInterval:Rt,errorDuringCalculation:Dt,errorApplyingInterval:Nt,errorBuildingVoicing:Tt,errorNeedTwoNotesForChord:Ft,errorChordDetectionFunction:$t,errorDuringChordDetection:Mt,errorInvalidTransposition:At,errorDuringTransposition:Ot,errorRenderInternal:zt,errorRenderInvalidNote:Vt,errorRenderMissingId:jt,errorRenderGeneric:Bt,errorRenderNoValidNotes:Kt,errorRenderPartialInvalid:Ut,errorRenderVexflow:qt,errorGeneric:Ht,errorInvalidIntervalProps:Gt,errorVoicingFailed:_t,errorNoValidInputNotes:Wt,errorOriginalInterval:Jt,errorInvertFailed:Yt,errorInvertedProps:Qt,errorInversionCalculation:Zt,errorFinalCheck:Xt,errorInvalidNoteList:en,errorUnknownMode:tn,consonancePerfect:nn,consonanceImperfect:on,consonanceDissonant:rn,consonanceUnknown:an,harmonicInterval:sn,melodicInterval:ln,harmonicVoicing:cn,melodicSequence:dn,intervalName:un,inverted:hn,simplified:pn,cannotSimplify:fn,semitones:gn,consonance:mn,voicingNotes:yn,detectedChords:vn,noChordsDetected:bn,relatedNotes:Sn,accent:xn,"note-Sequence-Renderer":{title:"Note Sequence Renderer",description:"Enter a note sequence. Use spaces for melody, no space for chords. Specify duration with <code>/</code> (h, q, 8, 16, 32, 64) and dots (<code>d</code>). Use <code>r</code> or <code>z</code> for rests.",examples:{title:"Click an example below to fill it into the input box:",clickToFill:"Click to fill into input box",mixed:"(Mixed)",chordsAndRests:"(Chords & Rests)",melody:"(Melody)"},options:{times:{common:"C (Common Time)",cut:"Cut Time (2/2)",free:"Free Time"},clef:"Clef:",clefs:{treble:"Treble",bass:"Bass",alto:"Alto",tenor:"Tenor"},keySignature:"Key Sig.:",keys:{c:"C Maj / A min",g:"G Maj / E min (1♯)",d:"D Maj / B min (2♯)",a:"A Maj / F♯ min (3♯)",e:"E Maj / C♯ min (4♯)",b:"B Maj / G♯ min (5♯)",fSharp:"F♯ Maj / D♯ min (6♯)",cSharp:"C♯ Maj / A♯ min (7♯)",f:"F Maj / D min (1♭)",bb:"B♭ Maj / G min (2♭)",eb:"E♭ Maj / C min (3♭)",ab:"A♭ Maj / F min (4♭)",db:"D♭ Maj / B♭ min (5♭)",gb:"G♭ Maj / E♭ min (6♭)",cb:"C♭ Maj / A♭ min (7♭)"},timeSignature:"Time Sig.:"},inputLabel:"Enter Notes:",inputPlaceholder:"Enter here or click an example above to fill...",renderButton:"Render Score",initialMessage:"The rendered score will be displayed here.",playbackExport:{title:"Playback & Export",play:"Play",stop:"Stop",exportMidi:"Export MIDI"},errors:{uiElementMissing:"NoteSequenceRenderer Error: Could not find required UI elements.",invalidNoteInfo:"Invalid noteInfo passed to getNoteDurationValue:",timeSignatureParseError:"Error parsing time signature for duration:",displayErrorFailed:"Error display failed: container invalid.",vexflowTargetError:"Error: Could not create VexFlow render target.",parseError:"Input parsing error: contains unrecognized format.",unexpectedRenderError:"An unexpected error occurred while processing the render request:",internalRenderError:"An internal error occurred during rendering: {{message}}",midiGenerationError:"[MIDI Export] Error generating MIDI data:",renderButtonMissing:"Could not bind event: Render button not found.",playbackSetupError:"Error during play sequence setup:",invalidBpmValue:"Invalid BPM:",parsingFailedForPlayback:"Parsing failed for audio playback.",midiExportError:"Error during MIDI export:",initFailed:"NoteSequenceRenderer initialization failed: container element not provided.",initialVexflowTargetError:"Could not create initial VexFlow render target.",initialRenderFailed:"Initial render failed:",initialRenderFailedMessage:"Initial render failed: {{message}}"},warnings:{invalidOctave:'Invalid octave "{{octave}}" in {{note}}',unrecognizedDuration:'Unrecognized duration "{{duration}}" in "{{part}}"',unknownDurationForValue:'Unknown duration string for value calculation: "{{duration}}" in note:',timeSignatureParse:'Could not parse time signature "{{timeSignature}}", defaulting to 4/4 measure duration.',invalidMeasureDuration:"Invalid or non-positive measure duration, skipping barline insertion.",unknownDurationForBeat:"Unknown duration for beat calculation: {{duration}}",midiConversionFailed:'[MIDI Helper] Could not convert key "{{vexKey}}" to MIDI number:',midiNoNotes:"[MIDI Export] No notes to export.",midiTimeSignatureFailed:"[MIDI Export] Failed to set time signature:",playbackBindingFailed:"Could not bind play event: play button, textarea, or BPM input not found.",stopBindingFailed:"Could not bind stop event: stop button not found.",midiBindingFailed:"Could not bind MIDI export event: button or related controls missing."},logs:{freeTimeSelected:"Free Time selected, skipping barline insertion.",renderRequestProcessed:"Score render request processed (with key signature).",playButtonClicked:"Play button clicked",audioEvents:"Audio Events:",noPlayableAudioEvents:"Parsed notes resulted in no playable audio events (maybe only rests?).",noAudioEventsGenerated:"No audio events generated.",noNotesToPlay:"No notes to play.",stopButtonClicked:"Stop button clicked",transportStopped:"Tone Transport stopped event detected.",exportMidiClicked:"Export MIDI button clicked",midiExportInitiated:"MIDI file export initiated.",exampleFilled:"Filled example: {{exampleText}}",initialized:"Note Sequence Renderer tool initialized (with key signature support)."},alerts:{invalidBpm:"Please enter a valid BPM (30-500).",invalidNotesForPlayback:"Input contains invalid notes. Cannot play.",playbackFailed:"Failed to start playback: {{message}}",invalidBpmMidi:"Please enter a valid BPM (30-500) for MIDI export.",invalidNotesForMidi:"Input contains invalid notes. Cannot export MIDI.",noNotesForMidi:"No notes to export to MIDI.",midiGenerationFailed:"Failed to generate MIDI file.",midiExportFailed:"Failed to export MIDI: {{message}}"},initialDisplayMessage:"Please enter notes above and click 'Render Score'."},keyRelationshipVisualizer:In,common:Cn},wn="音乐理论工具箱",kn="工具箱🏠",Pn="欢迎来到音乐理论学习工具箱",En="一个让音乐理论学习更直观、更高效的交互式平台。",Rn="本工具箱旨在通过程序化计算和可视化，替代学习过程中繁琐的人工查表与推算。我们利用 <strong>Tonal.js</strong> 进行精确的音乐理论计算，并通过 <strong>VexFlow</strong> 将结果渲染成清晰的乐谱，帮助您加深理解，提高学习效率。",Dn="探索我们的工具",Nn="音符序列渲染器",Tn="将音符序列渲染为可播放、可导出的乐谱，支持自定义设置。",Fn="音程分析器",$n="计算任意两个音符间的音程，支持声部构建与和弦识别。",Mn="音阶浏览器",An="生成并显示各种音阶，提供用法建议并高亮其特征音。",On="调关系可视化",zn="使用五度圈等图形，直观展示各调之间的关系。",Vn="重音识别器",jn="分析多声部音乐的节拍、时值与音高轮廓，并可视化重音。",Bn="免费音乐制作资源",Kn="精选的免费音色库资源列表，助您创作。",Un="准备好了吗？请从左侧边栏选择一个工具开始您的探索之旅！",qn="音程分析器",Hn="输入格式:<br>1. 两音符: <code>C4 G4</code> (计算音程)<br>2. 基础音符 + 音程: <code>C4 M3 P5</code> (构建声部)<br>3. 多个音符: <code>C4 E4 G4 B4</code> (识别和弦)<br>(所有音符必须带八度)",Gn="输入:",_n="例如: C4 G4 或 C4 M3 P5 或 C4 E4 G4",Wn="分析",Jn="清除",Yn="结果:",Qn="显示转位",Zn="显示简化",Xn="输入不能为空。",ei="输入至少需要两部分。",ti='第一部分 "{{note}}" 必须是有效的带八度音符。',ni="以下部分不是有效的音程: {{intervals}}",ii='输入中包含无效或缺少八度的音符: "{{note}}"。',oi='无法识别第二部分 "{{part}}"，它既不是有效音程也不是有效音符(或缺少八度)。',ri="输入格式无法识别。请检查音符是否都带八度。",ai="无法获取音符的 MIDI 值，请检查输入。",si="无法计算音程，请检查输入。",li='无法解析计算出的音程 "{{interval}}"。',ci="计算过程中发生错误。",di='从基础音符 "{{baseNote}}" 应用音程 "{{intervalName}}" 时出错。',ui="构建声部时发生错误: {{message}}",hi="和弦检测至少需要输入两个音符。",pi="内部错误：无法访问和弦检测功能。",fi="和弦检测过程中发生错误: {{message}}",gi='应用音程 "{{intervalName}}" 到 "{{baseNote}}" 时出错，结果无效。',mi="移调时发生错误: {{message}}",yi="渲染谱例时发生内部错误。",vi="无法渲染：音符格式无效",bi="渲染错误：容器缺少 ID。",Si="渲染错误: {{message}}",xi="无法渲染谱例：无有效音符。",Ii="渲染谱例时发生错误：部分音符格式无效。",Ci="渲染 VexFlow 谱例时出错: {{message}}",Li="错误: {{message}}",wi="无法获取有效的音程属性。",ki="未能生成声部音符。",Pi="无有效输入音符。",Ei="未能计算有效的原始音程。",Ri="无法计算此音程的转位(空结果)。",Di="无法获取转位音程的属性。",Ni="计算转位时出错: {{message}}",Ti="无法获取有效的音程属性(最终检查)。",Fi="未能生成有效的音符列表。",$i="无法识别的处理模式。",Mi="完全协和",Ai="不完全协和",Oi="不协和",zi="未知",Vi="和声音程",ji="旋律音程",Bi="和声声部",Ki="旋律序列",Ui="音程: {{name}}",qi=" (转位)",Hi=" [简化: {{name}}]",Gi=" [无法简化]",_i="半音数量: {{count}}",Wi="协和性: {{type}}",Ji="构建音符: {{notes}}",Yi="检测到的和弦: {{chords}}",Qi="未检测到明确的和弦。",Zi="相关音符: {{notes}}",Xi={title:"重音识别器",desc:"按声部分行输入音符序列（音高/时值，例如 C4/q D5/8 E5/8）。工具将分析各声部重音以及整体和声进行。",configLabel:"配置",timeSigLabel:"拍号 (Time Sig):",keyLabel:"调 (Key):",accentDisplayLabel:"声部重音显示:",metricalAccentLabel:"节拍 (Metrical)",durationalAccentLabel:"时长 (Durational)",registralAccentLabel:"音域 (Registral)",contourAccentLabel:"轮廓 (Contour)",articulationAccentLabel:"演奏法/力度 (Art./Dyn. - Placeholder)",textureAccentLabel:"织体 (Texture - Placeholder)",patternAccentLabel:"模式打破 (Pattern - Placeholder)",inputSectionLabel:"输入 (按声部分行)",noteSequenceLabel:"音符序列:",inputPlaceholder:`每行代表一个声部, 音符用空格分隔, 例:
C4/q E4/q G4/h
G3/w
R/q C3/q R/h`,inputHint:"使用标准音高表示法 (C4, Db5) 和时值缩写 (w, h, q, 8, 16...)，用 R 或 Z 表示休止符。",analyzeButton:"分析重音",analysisResultsLabel:"分析结果 (表格视图)",legendPlaceholder:"颜色图例将显示在此处。",analysisPlaceholder:'点击 "分析重音" 按钮后，结果表格将显示在这里。',playbackControlsLabel:"播放控制",playButton:"播放",stopButton:"停止",bpmLabel:"BPM:",accentDisplay:{metrical:"节拍",durational:"时长",registral:"音域",contour:"轮廓",articulation:"演奏法/力度",texture:"织体",pattern:"模式打破"},status:{initial:'请输入音符序列并配置参数，然后点击 "分析重音"。',parsing:"正在解析输入...",calculating:"正在计算重音分数 (含和声分析)...",generatingTable:"正在生成表格..."},analysis:{messageComplete:"重音分析完成 (分离和声行)。",details:"和声分析为初版，部分重音类型为占位符。"},table:{noData:"无分析数据可生成表格。",noVoiceOrHarmony:"无声部或和声事件。",headerElement:"元素",headerHarmony:"和声",headerVoice:"声部 {{voiceId}}",headerTotalAccent:"总重音",restSymbol:"(休)"},legend:{initial:"分析后将显示颜色图例。",notAvailable:"无法生成图例。",title:"声部重音类型基础色 (勾选以叠加显示):",footer:"和声行显示和弦符号及其重音强度；总重音行颜色基于该时间点所有事件（含和声）的总强度。"},tooltip:{time:"时间: {{time}}",harmony:" | 和声: {{symbol}} (强度: {{strength}}, 类型: {{type}})",continuing:" | 持续: {{symbol}}",noteStart:"开始: {{time}} | 事件 {{eventId}}: {{pitch}} ({{duration}} 拍)",rawAccents:" | 原始重音: {{accents}}",restStart:"休止符开始: {{time}} | 事件 {{eventId}} ({{duration}} 拍)",continuingNote:"持续: 事件 {{eventId}} ({{pitch}})",continuingRest:"持续休止: 事件 {{eventId}}",totalStrength:"时间: {{time}} | 总计强度 (含和声): {{strength}}"},alert:{parseErrors:`解析输入时出现错误 (详情见控制台)，已跳过无效项。

{{errors}}`},error:{uiMissing:"加载工具时出错：缺少界面元素。",invalidTimeSignature:"无效的拍号: {{timeSignature}}",invalidDurationSymbol:'声部 {{voiceId}}, 元素 {{elementIndex}}: 无效的时值符号 "{{durationSymbol}}"。已跳过。',invalidPitch:'声部 {{voiceId}}, 元素 {{elementIndex}}: 无效的音高 "{{pitch}}"。已跳过。',parseReturnedNull:"解析返回 null。",analysisFailed:"分析时发生错误: {{message}}"}},eo={title:"调关系可视化器",description:"显示大小调关系。点击节点高亮，使用右侧图例筛选关系，切换布局。",loadingGraph:"正在加载关系图...",legendTitle:"关系图例 (点击切换显示)",loadingLegend:"正在加载图例...",layoutParallel:"平行大小调优先",layoutRelative:"关系大小调优先",invalidKey:"无效的调",keyLabelMajor:"{{tonic}} 大调",keyLabelMinor:"{{tonic}} 小调",legend:{relative:"关系调",parallel:"平行调",domSubdom:"属/下属",secondary:"副属和弦",neapolitan:"那不勒斯 (bII)",mixture:"色彩性/混合"},error:{invalidKeyInfo:"无法获取 {{tonic}} {{type}} 的有效调信息。",invalidContainerSize:"无效的容器尺寸用于布局计算。",cytoscapeContainerNotFound:"未找到 Cytoscape 容器！",cytoscapeInitializationFailed:"初始化 Cytoscape 时出错：",graphLoadingFailed:"加载关系图时出错: {{message}}。请检查控制台。",noContainerProvided:"调关系可视化器初始化失败：未提供容器元素。",uiElementsMissing:"未找到必要的 UI 元素（主容器、图例、图形或布局按钮）。请检查 HTML 模板。",uiElementsMissingShort:"错误：缺少 UI 布局元素。",legendPopulationFailed:"填充图例时出错：",legendLoadingFailed:"加载图例失败。",graphDataGenerationFailedShort:"无法生成图形数据。",graphDataGenerationFailed:"图形数据生成或初始化时出错：",graphInitializationFailed:"初始化图形失败: {{message}}"},warning:{layoutPositions:"布局位置警告：预期 24，实际平行：{{parallel}}，关系：{{relative}}"},log:{graphGenerated:"已生成 {{nodes}} 个节点和 {{edges}} 条边，包含两种布局选项。",cytoscapeInitialized:"Cytoscape 图形已使用预设布局初始化。",toolInitialized:"调关系可视化器工具已初始化，支持布局切换。"}},to={notAvailable:"无",none:"无"},no={title:wn,toolbox:kn,welcomeTitle:Pn,tagline:En,introText:Rn,exploreTools:Dn,noteSequenceRenderer:Nn,noteSequenceRendererDesc:Tn,intervalCalculator:Fn,intervalCalculatorDesc:$n,scaleExplorer:Mn,scaleExplorerDesc:An,keyRelationships:On,keyRelationshipsDesc:zn,accentRecognizer:Vn,accentRecognizerDesc:jn,freeKontaktLibs:Bn,freeKontaktLibsDesc:Kn,"free-kontakt-libraries":{title:"免费音乐制作资源精选",disclaimerStrong:"免责声明：",disclaimerText:"此页面整理了互联网上公开可用的免费音乐制作软件 (DAW)、音源库及效果器资源的链接，旨在方便音乐人查找。所有产品的版权归原始开发者/公司所有。请务必访问官方链接，仔细阅读并遵守每个产品的使用许可协议 (EULA)。本站与所列公司无官方合作关系，列表仅供参考。",freeDaws:"免费数字音频工作站 (DAWs)",cakewalkDescription:"(功能强大的免费 Windows DAW)",sonarDescription:"(免费层)",foundationBundles:"基础与综合包",kompleteStartDescription:"(包含 Kontakt Player, Reaktor Player 及众多音源效果器)",kontaktPlayerDescription:"(独立播放器)",majorSoundVendors:"主要音源厂商免费精选",arturia:"Arturia",analogLabDescription:"(大量经典合成器预设)",ikMultimedia:"IK Multimedia",syntronik2Description:"(免费版经典合成器合集)",spitfireAudio:"Spitfire Audio",labsDescription:"(持续更新的大量免费、高质量、创意音源)",bbcSoDescription:"(入门级完整管弦乐音源)",otherKontaktLibraries:"其他 Kontakt Player 免费库",audioImperia:"Audio Imperia",emergenceAudio:"Emergence Audio",emergenceAudioDescription:"(需查看页面确认免费内容)",fractureSounds:"Fracture Sounds",aprilFoolsLibrary:"(愚人节音色库)",heavyocity:"Heavyocity",impactSoundworks:"Impact Soundworks",pianoDescription:"(钢琴)",shredderDescription:"(可能较旧，请检查可用性)",nativeInstruments:"Native Instruments",projectSam:"ProjectSAM",soniccouture:"Soniccouture",sonixinema:"Sonixinema",scorehubDescription:"(平台内可能包含免费下载)",sonokinetic:"Sonokinetic",tuttiDescription:"(随机管弦乐乐句)",empDescription:"(Rhodes 钢琴 - 检查是否仍免费)",vivaceDescription:"(管弦乐齐奏采样)",carouselDescription:"(游乐场风琴)",sonuscore:"Sonuscore",cinematicTextures:"电影音效织体",soundiron:"Soundiron",foodPercussion:"(食物打击乐)",strezovSampling:"Strezov Sampling",tempestAudio:"Tempest Audio",waveletAudio:"Wavelet Audio",pulseBoxDescription:"(可能需注册获取)",initializationError:"FreeKontaktLibraries 初始化失败: 未提供容器元素。",initializationSuccess:"Free Kontakt Libraries 资源页面已初始化。"},"scale-Explorer":{section1Title:"音阶生成与浏览",section1Description:"选择一个根音和音阶类型，或点击“随机”来探索各种音阶。",tonicLabel:"根音:",tonicPlaceholder:"例如: C4, Ab, F#",scaleTypeLabel:"音阶类型:",loadingOption:"-- 加载中 --",clefLabel:"谱号:",trebleClef:"高音",bassClef:"低音",altoClef:"中音",tenorClef:"次中音",generateScaleButton:"生成音阶",randomizeScaleButton:"随机生成",scaleNotesTitle:"音阶构成音 (特征音加粗):",selectParamsPrompt:"选择参数后点击生成。",scaleUsageTitle:"调式特点与建议:",noUsageSuggestion:"-",noUsageSuggestionAvailable:"暂无该调式的建议信息。",scoreRenderTitle:"乐谱渲染:",scoreDisplayPrompt:"乐谱将在此处显示。",section2Title:"音阶识别",section2Description:'输入一组音符 (用空格分隔，例如 "C4 D# F A")，系统将尝试识别包含这些音符的可能音阶。',inputNotesLabel:"输入音符:",inputNotesPlaceholder:"例如: G3 Bb3 C#4 F4",detectScaleButton:"识别音阶",detectionResultPrompt:"在此处显示识别结果。",usage:{major:"基础的大调音阶，明亮、开朗、稳定。广泛用于各种音乐。",lydian:"比大调更明亮、梦幻，带有#4（增四度）特色音。常用于电影配乐、爵士乐（尤其在Maj7#11和弦上）。",mixolydian:"具有属功能（Dominant）感觉，因为包含小七度(b7)。布鲁斯、摇滚、放克和乡村音乐中常见，常用于属七和弦。",minor:"自然小调，忧郁、悲伤的基调。",dorian:"比自然小调略明亮（因含大六度(6)），带有爵士、民谣或轻微布鲁斯感。常用于爵士乐的 ii-V-I 进行中的 IIm7 和弦。",phrygian:"非常黑暗、具有西班牙/弗拉门戈/中东风情，特色是降二级(b2)。金属乐中也常用。",locrian:"最不稳定、最不协和的调式，包含减五度(b5)。很少作为中心调式，常作为经过或特殊效果。",harmonicMinor:"具有鲜明的中东或古典色彩，因其增二度（bVI到VII之间）和导音（大七度(7)）。常用于小调的属和弦（V7）。",melodicMinor:"上行时比自然小调明亮（大六(6)、大七(7)），下行时通常还原为自然小调。爵士乐中常用其上行形式（爵士小调）。",majorPentatonic:"非常悦耳、开放、常用于民谣、乡村、亚洲音乐。缺少半音使其听起来和谐。",minorPentatonic:"布鲁斯、摇滚乐的基础，声音粗犷、有力。缺少二度和六度。",blues:"在小调五声音阶基础上加入降五度（b5，“蓝调音符”），有时也包含大三度，非常有特色，布鲁斯音乐的核心。",lydianDominant:"Mixolydian 的 #4 版本，既有属功能（b7）又有 Lydian 的明亮感（#4）。常用于爵士乐中的替代属和弦 (Sub V7) 或 Tritone Substitution。",phrygianDominant:"和声小调的第五个模式，具有强烈的西班牙/中东/犹太音乐风味（b2, M3, b7）。"},error:{uiElementsNotFound:"音阶浏览器错误：找不到以下 UI 元素：{{elements}}",vexflowTargetCreation:"无法创建 VexFlow 渲染目标。",missingTonicOrScaleType:"请输入根音并选择音阶类型。",cannotGetScale:'无法获取音阶 "{{fullScaleName}}"。',invalidScaleType:'无效的音阶类型: "{{scaleType}}"',unrecognizedTonic:'无法识别的根音: "{{tonic}}"。',checkInput:"请检查输入。",vexflowConversion:"成功获取音阶音符，但在转换为 VexFlow 格式时出错。",noRenderableNotes:"音阶不包含可渲染的音符。",generateRequestError:"处理音阶生成请求时发生错误:",generatingScale:"生成音阶时出错: {{message}}",cannotRandomize:"无法随机：音阶名称不可用。",noValidNotesProvided:"未提供有效的音符进行识别。",noValidPitchClasses:"输入中未找到有效的音高类别。",noMatchingScalesFound:"对于音符 [{{notes}}]，即使尝试将每个音符作为根音，也未找到匹配的已知音阶。",detectRequestError:"处理音阶识别请求时发生错误:",detectingScale:"识别音阶时出错: {{message}}",collapsibleStructure:"可折叠结构错误，头部：",initializationFailed:"音阶浏览器初始化失败：未提供容器元素。"},warning:{noteParseFailed:"无法解析音符: {{noteName}}，跳过。",transposeError:"移调根音 {{tonic}} 和音程 {{interval}} 时出错:",invalidNotesIgnored:"警告：以下输入无法识别为有效音符，已忽略：{{notes}}",processingScaleError:'处理音阶 "{{fullName}}" 时出错，归入“其他”。错误: {{error}}',noCollapsibleHeaders:"未找到可折叠头部以绑定事件。"},log:{scaleSelectPopulated:"音阶选择器已填充 {{count}} 个音阶。",defaultOctaveUsed:"根音未提供八度，渲染时默认使用八度 4。",scaleRenderedSuccessfully:'音阶 "{{fullScaleName}}" 渲染成功 (含增强)。',scaleDetectionCompleted:"音符 [{{notes}}] 的音阶识别完成 (检查了 {{tonicsCount}} 个潜在根音)。找到：{{priorityCount}} 个优先，{{otherCount}} 个其他音阶。",toolInitialized:"音阶浏览器工具已初始化 (含可折叠部分)。"},alert:{scaleListNotLoaded:"音阶列表尚未加载完成，无法随机。"},detecting:"正在识别...",inputNotesForDetection:"请输入至少一个音符进行识别。",invalidInputNotes:"输入无效，请用空格分隔音符。",inputNotes:"请输入音符。",possibleScalesFound:"尝试将每个输入音符 [{{tonics}}] 作为根音进行识别，包含音符 [{{notes}}] 的可能音阶如下：",commonModesScales:"常用调式/音阶",noMatchInCommonList:"未在常用列表中找到匹配项。",otherMatchingScales:"其他匹配音阶",noMoreMatchesInOtherScales:"未在其他音阶中找到更多匹配项。",noteAboutList:"注意: 此列表包含所有已知且包含输入音符的音阶，不一定是精确匹配。"},callToAction:Un,"tool-selector":{"note-sequence-renderer":"音符序列渲染器","interval-calculator":"音程分析器","scale-explorer":"音阶浏览器","key-relationships":"调关系可视化","accent-recognizer":"重音识别器","free-kontakt-libs":"免费音乐制作资源"},intervalAnalyzerTitle:qn,intervalAnalyzerDesc:Hn,inputLabel:Gn,inputPlaceholder:_n,analyzeButton:Wn,clearButton:Jn,resultsLabel:Yn,showInversionLabel:Qn,showSimplificationLabel:Zn,errorInputEmpty:Xn,errorNeedTwoParts:ei,errorInvalidBaseNote:ti,errorInvalidIntervals:ni,errorInvalidNoteInInput:ii,errorUnrecognizedSecondPart:oi,errorUnrecognizedFormat:ri,errorMidiValue:ai,errorCannotCalculateInterval:si,errorCannotParseInterval:li,errorDuringCalculation:ci,errorApplyingInterval:di,errorBuildingVoicing:ui,errorNeedTwoNotesForChord:hi,errorChordDetectionFunction:pi,errorDuringChordDetection:fi,errorInvalidTransposition:gi,errorDuringTransposition:mi,errorRenderInternal:yi,errorRenderInvalidNote:vi,errorRenderMissingId:bi,errorRenderGeneric:Si,errorRenderNoValidNotes:xi,errorRenderPartialInvalid:Ii,errorRenderVexflow:Ci,errorGeneric:Li,errorInvalidIntervalProps:wi,errorVoicingFailed:ki,errorNoValidInputNotes:Pi,errorOriginalInterval:Ei,errorInvertFailed:Ri,errorInvertedProps:Di,errorInversionCalculation:Ni,errorFinalCheck:Ti,errorInvalidNoteList:Fi,errorUnknownMode:$i,consonancePerfect:Mi,consonanceImperfect:Ai,consonanceDissonant:Oi,consonanceUnknown:zi,harmonicInterval:Vi,melodicInterval:ji,harmonicVoicing:Bi,melodicSequence:Ki,intervalName:Ui,inverted:qi,simplified:Hi,cannotSimplify:Gi,semitones:_i,consonance:Wi,voicingNotes:Ji,detectedChords:Yi,noChordsDetected:Qi,relatedNotes:Zi,accent:Xi,"note-Sequence-Renderer":{title:"音符序列渲染器",description:"输入音符序列。用空格分隔表示旋律，直接连接表示和弦。使用 <code>/</code> 指定时值 (h, q, 8, 16, 32, 64) 和附点 (<code>d</code>)，用 <code>r</code> 或 <code>z</code> 表示休止符。",examples:{title:"点击下面的示例可以填充到输入框：",clickToFill:"点击填充到输入框",mixed:"(混合)",chordsAndRests:"(和弦与休止)",melody:"(旋律)"},options:{times:{common:"C (常用拍)",cut:"2/2",free:"自由拍"},clef:"谱号:",clefs:{treble:"高音谱号",bass:"低音谱号",alto:"中音谱号",tenor:"次中音谱号"},keySignature:"调号:",keys:{c:"C 大调 / A 小调",g:"G 大调 / E 小调 (1♯)",d:"D 大调 / B 小调 (2♯)",a:"A 大调 / F♯ 小调 (3♯)",e:"E 大调 / C♯ 小调 (4♯)",b:"B 大调 / G♯ 小调 (5♯)",fSharp:"F♯ 大调 / D♯ 小调 (6♯)",cSharp:"C♯ 大调 / A♯ 小调 (7♯)",f:"F 大调 / D 小调 (1♭)",bb:"B♭ 大调 / G 小调 (2♭)",eb:"E♭ 大调 / C 小调 (3♭)",ab:"A♭ 大调 / F 小调 (4♭)",db:"D♭ 大调 / B♭ 小调 (5♭)",gb:"G♭ 大调 / E♭ 小调 (6♭)",cb:"C♭ 大调 / A♭ 小调 (7♭)"},timeSignature:"拍号:"},inputLabel:"输入音符:",inputPlaceholder:"在此输入或点击上方示例填充...",renderButton:"渲染乐谱",initialMessage:"在此处将显示渲染的乐谱。",playbackExport:{title:"播放与导出",play:"播放",stop:"停止",exportMidi:"导出 MIDI"},errors:{uiElementMissing:"NoteSequenceRenderer 错误: 找不到所需的 UI 元素。",invalidNoteInfo:"传递给 getNoteDurationValue 的 noteInfo 无效:",timeSignatureParseError:"解析拍号以获取时值时出错:",displayErrorFailed:"错误显示失败: 容器无效。",vexflowTargetError:"错误：无法创建 VexFlow 渲染目标。",parseError:"输入解析错误：包含无法识别的格式。",unexpectedRenderError:"处理渲染请求时发生意外错误:",internalRenderError:"渲染时发生内部错误: {{message}}",midiGenerationError:"[MIDI 导出] 生成 MIDI 数据时出错:",renderButtonMissing:"无法绑定事件：渲染按钮未找到。",playbackSetupError:"播放序列设置过程中出错:",invalidBpmValue:"无效的 BPM:",parsingFailedForPlayback:"音频播放解析失败。",midiExportError:"MIDI 导出过程中出错:",initFailed:"NoteSequenceRenderer 初始化失败: 未提供容器元素。",initialVexflowTargetError:"无法创建初始 VexFlow 渲染目标。",initialRenderFailed:"初始渲染失败:",initialRenderFailedMessage:"初始渲染失败: {{message}}"},warnings:{invalidOctave:'无效的八度音 "{{octave}}" 在 {{note}} 中',unrecognizedDuration:'无法识别的时值 "{{duration}}" 在 "{{part}}" 中',unknownDurationForValue:'用于值计算的未知时值字符串: "{{duration}}" 在音符中:',timeSignatureParse:'无法解析拍号 "{{timeSignature}}"，默认使用 4/4 拍时值。',invalidMeasureDuration:"无效或非正数的小节时值，跳过小节线插入。",unknownDurationForBeat:"用于节拍计算的未知时值: {{duration}}",midiConversionFailed:'[MIDI 助手] 无法将音高 "{{vexKey}}" 转换为 MIDI 编号:',midiNoNotes:"[MIDI 导出] 无音符可导出。",midiTimeSignatureFailed:"[MIDI 导出] 设置拍号失败:",playbackBindingFailed:"无法绑定播放事件：播放按钮、文本框或 BPM 输入框未找到。",stopBindingFailed:"无法绑定停止事件：停止按钮未找到。",midiBindingFailed:"无法绑定 MIDI 导出事件：缺少按钮或相关控件。"},logs:{freeTimeSelected:"已选择自由拍，跳过小节线插入。",renderRequestProcessed:"乐谱渲染请求已处理 (含调号)。",playButtonClicked:"播放按钮已点击",audioEvents:"音频事件:",noPlayableAudioEvents:"解析的音符未产生可播放的音频事件 (可能只有休止符?)。",noAudioEventsGenerated:"未生成音频事件。",noNotesToPlay:"无音符可播放。",stopButtonClicked:"停止按钮已点击",transportStopped:"检测到 Tone Transport 停止事件。",exportMidiClicked:"导出 MIDI 按钮已点击",midiExportInitiated:"MIDI 文件导出已启动。",exampleFilled:"已填充示例: {{exampleText}}",initialized:"音符序列渲染器工具已初始化 (支持调号)。"},alerts:{invalidBpm:"请输入有效的 BPM (30-500)。",invalidNotesForPlayback:"输入包含无效音符，无法播放。",playbackFailed:"启动播放失败: {{message}}",invalidBpmMidi:"请输入有效的 BPM (30-500) 以导出 MIDI。",invalidNotesForMidi:"输入包含无效音符，无法导出 MIDI。",noNotesForMidi:"无音符可导出为 MIDI。",midiGenerationFailed:"生成 MIDI 文件失败。",midiExportFailed:"导出 MIDI 失败: {{message}}"},initialDisplayMessage:"请在上方输入音符并点击 '渲染乐谱'。"},keyRelationshipVisualizer:eo,common:to};async function Ce(){const a=localStorage.getItem("language")||"zh";await y.init({lng:a,debug:!0,resources:{en:{translation:Ln},zh:{translation:no}},interpolation:{escapeValue:!1}})}function Y(){console.log(`Updating content for language: ${y.language}`),document.querySelectorAll("[data-i18n]").forEach(a=>{const e=a.getAttribute("data-i18n"),t=e.match(/^\[([^\]]+)\](.+)$/);if(t){const i=t[1],n=t[2];a.setAttribute(i,y.t(n))}else a.innerHTML=y.t(e)}),document.querySelectorAll("[data-i18n-placeholder]").forEach(a=>{const e=a.getAttribute("data-i18n-placeholder");a.placeholder=y.t(e)}),document.title=y.t("title")}const io=Object.freeze(Object.defineProperty({__proto__:null,i18next:y,initI18n:Ce,updateContent:Y},Symbol.toStringTag,{value:"Module"})),oo="modulepreload",ro=function(a){return"/"+a},ve={},$=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),s=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));n=Promise.allSettled(t.map(l=>{if(l=ro(l),l in ve)return;ve[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":oo,c||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(r){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=r,window.dispatchEvent(s),!s.defaultPrevented)throw r}return n.then(r=>{for(const s of r||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})},ao=[{id:"note-sequence-renderer",i18nKey:"tool-selector.note-sequence-renderer"},{id:"interval-calculator",i18nKey:"tool-selector.interval-calculator"},{id:"scale-explorer",i18nKey:"tool-selector.scale-explorer"},{id:"key-relationships",i18nKey:"tool-selector.key-relationships"},{id:"accent-recognizer",i18nKey:"tool-selector.accent-recognizer"},{id:"free-kontakt-libs",i18nKey:"tool-selector.free-kontakt-libs"}];function so(a){$(async()=>{const{i18next:e}=await Promise.resolve().then(()=>io);return{i18next:e}},void 0).then(({i18next:e})=>{if(!a){console.error("Error initializing Tool Selector: Container element not provided or not found.");return}a.innerHTML="";const t=document.createElement("ul");ao.forEach(i=>{const n=document.createElement("li"),o=document.createElement("a");o.textContent=e.t(i.i18nKey),o.href=`/#/${i.id}`,o.classList.add("tool-link"),n.appendChild(o),t.appendChild(n)}),a.appendChild(t),console.log("Tool links generated and added to the container."),be(a),window.addEventListener("hashchange",()=>be(a))})}function be(a){const e=window.location.hash;a.querySelectorAll(".tool-link").forEach(i=>{i.getAttribute("href")===e?i.classList.add("active"):i.classList.remove("active")})}function lo(a){a&&a instanceof HTMLElement?a.innerHTML="":a?console.warn("clearContainer: Provided element is not an HTMLElement:",a):console.warn("clearContainer: Provided element is null or undefined.")}async function co(a,e){if(!e){console.error("ToolLoader Error: Container element not provided.");return}lo(e);try{let t;switch(a){case"note-sequence-renderer":{t=(await $(()=>import("./NoteSequenceRenderer-3EzmE3yk.js"),__vite__mapDeps([0,1,2,3]))).initializeNoteSequenceRenderer;break}case"interval-calculator":{t=(await $(()=>import("./IntervalCalculator-CtS9Q-k5.js"),__vite__mapDeps([4,5,6,2,7]))).initializeIntervalCalculator;break}case"scale-explorer":{t=(await $(()=>import("./ScaleExplorer-yJVs6tq5.js"),__vite__mapDeps([8,2,5,9]))).initializeScaleExplorer;break}case"key-relationships":{t=(await $(()=>import("./KeyRelationshipVisualizer-B65CQkbf.js"),__vite__mapDeps([10,5,11]))).initializeKeyRelationshipVisualizer;break}case"free-kontakt-libs":{t=(await $(()=>import("./FreeKontaktLibraries-Bbmiyfvl.js"),__vite__mapDeps([12,13]))).initializeFreeKontaktLibraries;break}case"accent-recognizer":{t=(await $(()=>import("./AccentRecognizer-BRw2WczL.js"),__vite__mapDeps([14,5,6,1,15]))).initializeAccentRecognizer;break}default:console.warn(`ToolLoader Warn: No loader defined for tool "${a}".`),e.innerHTML=`<p>Error: Tool "${a}" not found or not implemented yet.</p>`;return}typeof t=="function"?(console.log(`Initializing tool: ${a}`),t(e),Y()):(console.error(`ToolLoader Error: Could not find initializer function for tool "${a}".`),e.innerHTML=`<p>Error: Could not initialize tool "${a}".</p>`)}catch(t){console.error(`ToolLoader Error: Failed to load tool "${a}".`,t),e.innerHTML=`<p>Error loading tool "${a}". Check the console for details.</p>`}}const Se=document.getElementById("tool-list"),Z=document.getElementById("tool-display-area");async function uo(){await Ce(),Y(),ho(),fo(),go()}function ho(){Se?(so(Se),console.log("Tool selector initialized.")):console.error("Error: Tool list container (#tool-list) not found.")}function Le(){const a=window.location.hash,e=a.startsWith("#/")?a.substring(2):null;po(e)}function po(a){Z?a?co(a,Z):(Z.innerHTML=`
        <div class="welcome-container">
          <h1 data-i18n="welcomeTitle"></h1>
          <p class="tagline" data-i18n="tagline"></p>
          
          <p class="intro-text" data-i18n="introText"></p>

          <h2 data-i18n="exploreTools"></h2>

          
          <div class="tool-grid">
            <div class="tool-card">
              <h3><a href="#/note-sequence-renderer" class="button" data-i18n="noteSequenceRenderer"></a></h3>
              <p data-i18n="noteSequenceRendererDesc"></p>
            </div>
            <div class="tool-card">
              <h3><a href="#/interval-calculator" class="button" data-i18n="intervalCalculator"></a></h3>
              <p data-i18n="intervalCalculatorDesc"></p>
            </div>
            <div class="tool-card">
              <h3><a href="#/scale-explorer" class="button" data-i18n="scaleExplorer"></a></h3>
              <p data-i18n="scaleExplorerDesc"></p>
            </div>
            <div class="tool-card">
              <h3><a href="#/key-relationships" class="button" data-i18n="keyRelationships"></a></h3>
              <p data-i18n="keyRelationshipsDesc"></p>
            </div>
            <div class="tool-card">
              <h3><a href="#/accent-recognizer" class="button" data-i18n="accentRecognizer"></a></h3>
              <p data-i18n="accentRecognizerDesc"></p>
            </div>
            <div class="tool-card">
              <h3><a href="#/free-kontakt-libs" class="button" data-i18n="freeKontaktLibs"></a></h3>
              <p data-i18n="freeKontaktLibsDesc"></p>
            </div>
          </div>

          <p class="call-to-action" data-i18n="callToAction"></p>

        </div>
      `,Y()):console.error("Error: Tool display area (#tool-display-area) not found.")}function fo(){Le()}function go(){const a=document.getElementById("language-select");a.value=y.language,a.addEventListener("change",e=>{const t=e.target.value;localStorage.setItem("language",t),location.reload()})}window.addEventListener("hashchange",Le);document.addEventListener("DOMContentLoaded",()=>{uo()});export{y as i};
